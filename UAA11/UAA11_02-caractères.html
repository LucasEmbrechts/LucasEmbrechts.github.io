<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Consolas'; }
      @media print {
		  .remark-slide-scaler {
			width: 100% !important;
			height: 100% !important;
			transform: scale(1) !important;
			top: 0 !important;
			left: 0 !important;
		  }
		}
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Programmation procédurale :
# les caractères
<img height="200px" src="img/logo.png">
---

## On parle de quoi ?

1. <a href="UAA11-ch3.html#3">Codification</a>
2. <a href="UAA11-ch3.html#4">Lecture</a>
3. <a href="UAA11-ch3.html#5">Le problème du tampon (buffer)</a>
4. <a href="UAA11-ch3.html#8">Impression</a>
5. <a href="UAA11-ch3.html#9">Fonctions</a>
---


## Codification d'un caractère

```c
void main(void) {
	char c;
	printf("Entrez un caractere :");
	scanf_s("%c", &c, 1);

	printf("\nCaractere %c", c);
	printf("\nCode ASCII : %d", c);
	printf("\nHexa : %X", c);
}
```
---
## Lecture d'un caractère

Lire un caractère peut se faire de deux manières différentes.

### Avec `scanf_s`

```c
void main(void) {
	char c;
	printf("Entrez un caractere :");
	scanf_s("%c", &c, 1);
```

### Avec `getchar`
```c
void main(void) {
	char c;
	printf("Entrez un caractere :");
	c = getchar();
```
---
## Le problème du tampon (buffer)

Lors d'une lecture via `scanf_s`, l'entièreté des caractères entrés sur la console est enregistrée.

Ainsi, lorsque l'utilisateur appuie sur ENTER pour valider son entrée, le caractère de saut de ligne `\n` est également enregistré.

Après chaque `scanf_s` il reste donc un caractère à lire dans le tampon. Le `scanf` suivant (dans une boucle par exemple), utilisera ce caractère restant comme caractère à lire !

```c
void main (void){
  char reponse;
  printf("Entrez un caractère :\n");
  scanf_s("%c", &reponse, 1);
  printf("Vous avez entré %c\n", reponse);
  
  printf("Entrez un caractère :\n");
  scanf_s("%c", &reponse,1);
  printf("Vous avez entré %c\n", reponse);
  
  printf("Une ligne vide est apparue comme par magie !");
}

```
---
## Le problème du tampon (buffer)
Pour résoudre ce problème, il suffit de "vider" le tampon en lisant tous les caractères restant.

```c
void main (void){
  char reponse;
  printf("Entrez un caractère :\n");
  scanf_s("%c", &reponse,1);

  // ici, le buffer contient un \n

  printf("Vous avez entré %c\n", reponse);
  
  viderTampon(); // on vide le tampon : le \n disparaît du buffer

  printf("Entrez un caractère :\n");
  scanf_s("%c", &reponse, 1);
  printf("Vous avez entré %c\n", reponse);
  
  printf("La ligne vide a disparu !");
}
```
---
## Le problème du tampon (buffer)

```c
void viderTampon(void)
{
	int c;
	do
	{
		c = getchar();
	} while (c != '\n' && c != EOF);
}
```
---
## Impression d'un caractère

L'impression d'un caractère peut se faire de deux manières différentes.

### Avec `printf`

```c
void main (void){
    char c;

    printf("Entrez un caractère :\n");
    scanf_s("%c", &c, 1);
    printf("Le caractère entré est %c\n", c);
}
```

### Avec `putchar`

```c
void main (void){
    char c;

    printf("Entrez un caractère :\n");
    scanf_s("%c", &c, 1); // ou c = getchar();
    printf("Le caractère entré est : ");
    putchar(c); // imprime c ET passe à la ligne
}
```

---
## Fonctions

En C, il existe un grand nombre de fonctions prédéfinies pouvant être utilisées avec des caractères.

### Fonctions de vérifications (`ctype.h`)

* `isalnum` : vérifie si un caractère est alphanumérique
* `isalpha` : vérifie si un caractère est une lettre de l'alphabet
* `isdigit` : vérifie si un caractère est un chiffre
* `islower` : vérifie si le caractère est une lettre de l'alphabet en minuscule
* `isupper` : vérifie si le caractère est une lettre de l'alphabet en majuscule
* `isspace` : vérifie si le caractère est un espace
* `isxdigit` : vérifie si le caractère fait partie du système hexadécimal
---
### Fonctions de transformation (`ctype.h`)

* `tolower` : transforme le caractère en minuscule
* `toupper` : transforme le caractère en majuscule

Que fait le code suivant ?

```c
char c;

printf("Entrez un caractère : ");
c = getchar();
printf("Caractère transformé : ");
putchar(toupper(++c));
```
---

Exercice : traduire le DA suivant.

```da
┌─── * Mon programme
│ Obtenir c
│╔══ while(c ≠ '\n')
│║┌── if (c = 'a')
│║│ c = 'z'
│║├── else if(c = 'A')
│║│ c = 'Z'
│║├── else
│║│ c devient la précédente
│║└──
│║ Sortir c
│║ Obtenir c
│╙──
└──────────
```
    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/FitText.js/1.2.0/jquery.fittext.min.js"></script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>